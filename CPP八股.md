# 小贺八股

## 三、cpp基础

### 1.cpp的四种智能指针

1. uniqu_ptr用delete删除了拷贝构造函数和赋值运算符函数

2. sharedptr内部是两个指针，分别指向数据和管理块，所以sp的大小是常规指针的两倍

3. 共有操作：get、reset、swap、*、-》、bool

4. 使用move可以转移up到另一个up或sp，原来的up变为空指针，不再拥有内存控制权

5. up不需要维护计数，性能更高

6. weakptr是一种弱引用，指向sp管理的对象，不影响对象的生命周期，不改变sp的引用计数，无论是否有wp，只要sp的引用为零，则对象直接销毁

7. wp需要调用lock函数转换为sp来解引用对象，lock返回的是sp对象，若不存在，则返回空的sp

8. wp的expired（）可以判断是否被释放

9. wp的使用场景：实现缓存、避免循环引用、实现单例模式

10. 为什么makeshared更安全，因为makeshared是一个函数模板，他分配一次内存并初始化对象返回sp。而sp（new T）则要分配两次，一次是分配t的内存，一次是分配管理块的内存。

11. 避免用同一个raw pointer初始化多个shared-ptr，会导致生成两个独立的控制块，即两个控制块的引用计数是不会相互影响的，两个都是1。且在析构的时候，会释放两次同一块内存。

### 2.Cpp中的内存分配

1. 栈、堆、全局/静态存储区、常量存储区、代码区

### 3.指针参数传递和引用传递

1. 内存空间的开辟，指针传参是值传参

2. 对局部变量的操作

3. 编译角度的差异

### 3.const和static

#### 1.static控制存储方式和可见性

1. 局部变量：

2. 全局变量

3. 函数

4. 类

5. 类成员/类函数声明

6. （静态非常量数据成员，只能在类外定义和初始化，类内仅仅是声明）

#### 2.const

1. 基本数据类型

2. 指针变量和引用变量

3. 函数中

4. 类中

5. 类对象

6. 成员函数

## 四、类和数据抽象

### 1.什么是类的继承

1. 类与类之间的关系：包含，使用，继承

2. 继承的相关概念

3. 继承的特点

4. 访问控制、兼容性原则

### 2.什么是组合

### 3.构造函数和析构函数可否抛出异常

### 4.类如何实现只能静态分配和只能动态分配

### 5.何时需要初始化列表，过程是什么

## 五、STL容器和算法

### 1.STL介绍：

1. **容器**是一种用于存放数据的类模板

2. **算法**是一种方法模板

3. **迭代器**是重载了指针相关操作的类模板，每个STL容器都有自己的迭代器

4. **仿函数**是重载了operator()的类或类模板

5. **配接器**用来修饰容器或者仿函数或迭代器接口

6. **配置器**负责空间管理与配置，是一个实现了动态空间配置、空间管理、空间释放的类模板。

7. **SGI的双层配置器**，第一级使用malloc和free分配和回收，第二级根据大小，查询链表

8. **vector**自动扩容，连续线性空间，三个迭代器，拷贝扩容引起迭代器失效；**list**双向链表，一个指针，动态对每个元素分配和释放空间，迭代器不失效；**deque**双向开口的连续线性空间。不同vector，没有容量这一概念，以动态的分段连续空间组合而成。

# 零零碎碎的八股

## 1.Allocator

Allocator（概念）是对访问、寻址、分配、释放、构造和析构策略的封装。是一个满足特定要求的类。标准库中需要分配释放存储空间的容器都需要一个Allocator，除了std::array。

## 2.内存池

## 3.线程池
